<!DOCTYPE html>
<html lang="th">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏£‡∏ß‡∏°‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            background: transparent;
            -webkit-app-region: no-drag;
            margin: 0;
            overflow: hidden;
        }

        .glass {
            background: rgba(15, 23, 42, 0.95);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .drag-region {
            -webkit-app-region: drag;
        }

        .no-drag {
            -webkit-app-region: no-drag;
        }

        ::-webkit-scrollbar {
            width: 4px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
        }

        ::-webkit-scrollbar-thumb {
            background: rgba(100, 200, 255, 0.3);
            border-radius: 2px;
        }
    </style>
</head>

<body>
    <div class="glass rounded-xl shadow-2xl overflow-hidden" style="width: 400px;">
        <div id="title-bar"
            class="drag-region p-2 border-b border-white/10 flex justify-between items-center cursor-move">
            <span class="text-blue-400 text-xs font-bold">üìã ‡∏£‡∏ß‡∏°‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®</span>
            <div class="flex gap-1 no-drag">
                <button id="lock-btn" onclick="toggleLock()" class="text-slate-400 hover:text-cyan-400 text-xs"
                    title="‡∏•‡πá‡∏≠‡∏Ñ/‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Ñ‡∏Å‡∏≤‡∏£‡∏•‡∏≤‡∏Å">üîì</button>
                <button onclick="window.panelAPI.close('copy')"
                    class="text-slate-400 hover:text-red-400 text-xs">‚úï</button>
            </div>
        </div>

        <!-- Default: Open/Close Hospital -->
        <div class="p-2 border-b border-white/10">
            <div class="flex gap-2">
                <button
                    onclick="copyCmd(this, '/an ‡πÇ‡∏£‡∏á‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏• ${serverName} ‡πÄ‡∏õ‡∏¥‡∏î‡∏ó‡∏≥‡∏Å‡∏≤‡∏£‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö‡∏Ñ‡∏£‡∏±‡∏ö/‡∏Ñ‡πà‡∏∞', 'üü¢ ‡πÄ‡∏õ‡∏¥‡∏î‡∏ó‡∏≥‡∏Å‡∏≤‡∏£')"
                    class="no-drag flex-1 py-2 bg-emerald-600 hover:bg-emerald-500 text-white text-xs font-medium rounded-lg transition">
                    üü¢ ‡πÄ‡∏õ‡∏¥‡∏î‡∏ó‡∏≥‡∏Å‡∏≤‡∏£
                </button>
                <button
                    onclick="copyCmd(this, '/an ‡πÇ‡∏£‡∏á‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏• ${serverName} ‡∏Ç‡∏≠‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï‡∏õ‡∏¥‡∏î‡∏ó‡∏≥‡∏Å‡∏≤‡∏£ ‡∏Ç‡∏≠‡∏≠‡∏†‡∏±‡∏¢‡πÉ‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡πÑ‡∏°‡πà‡∏™‡∏∞‡∏î‡∏ß‡∏Å ‡∏î‡∏π‡πÅ‡∏•‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏î‡πâ‡∏ß‡∏¢‡∏ô‡∏∞‡∏Ñ‡∏£‡∏±‡∏ö/‡∏Ñ‡πà‡∏∞', 'üî¥ ‡∏õ‡∏¥‡∏î‡∏ó‡∏≥‡∏Å‡∏≤‡∏£')"
                    class="no-drag flex-1 py-2 bg-rose-600 hover:bg-rose-500 text-white text-xs font-medium rounded-lg transition">
                    üî¥ ‡∏õ‡∏¥‡∏î‡∏ó‡∏≥‡∏Å‡∏≤‡∏£
                </button>
            </div>
        </div>

        <!-- Recent Commands (last 3) -->
        <div id="recent-section" class="p-2 border-b border-white/10 hidden">
            <div class="text-[9px] text-slate-500 mb-1">üïê ‡πÉ‡∏ä‡πâ‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î</div>
            <div id="recent-list" class="flex flex-wrap gap-1"></div>
        </div>

        <!-- Search Box -->
        <div class="p-2 border-b border-white/10">
            <input type="text" id="search-input" placeholder="üîç ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏≠‡∏∑‡πà‡∏ô‡πÜ ‡πÄ‡∏ä‡πà‡∏ô ‡πÄ‡∏£‡πÄ‡∏ö‡∏•, freeday..."
                class="no-drag w-full px-2 py-1.5 bg-slate-800 border border-slate-600 rounded text-xs text-white placeholder-slate-500 focus:outline-none focus:border-cyan-500"
                oninput="filterCommands(this.value)">
        </div>

        <!-- Search Results (hidden by default) -->
        <div id="commands-list" class="p-2 max-h-[200px] overflow-y-auto hidden">
            <!-- Commands will be rendered here -->
        </div>
    </div>

    <script>
        // Server name placeholder
        const serverName = 'ONE CITY';

        // Recent commands (max 3)
        let recentCommands = JSON.parse(localStorage.getItem('recentCommands') || '[]');

        // All available commands (from Desktop OP copyCmd function)
        const commands = [
            { name: '‚è∞ ‡∏õ‡∏¥‡∏î 5 ‡∏ô‡∏≤‡∏ó‡∏µ', cmd: `/an ‡πÇ‡∏£‡∏á‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏•‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏à‡∏∞‡∏õ‡∏¥‡∏î‡∏ó‡∏≥‡∏Å‡∏≤‡∏£‡πÉ‡∏ô‡∏≠‡∏µ‡∏Å 5 ‡∏ô‡∏≤‡∏ó‡∏µ ‡∏á‡∏î‡∏£‡∏±‡∏ö‡πÄ‡∏Ñ‡∏™‡∏ô‡∏≠‡∏Å‡∏ó‡∏∏‡∏Å‡∏Å‡∏£‡∏ì‡∏µ ‡∏Ç‡∏≠‡πÉ‡∏´‡πâ‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ä‡∏ô‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û‡∏Å‡∏±‡∏ô‡∏î‡πâ‡∏ß‡∏¢‡∏ô‡∏∞‡∏Ñ‡∏∞/‡∏Ñ‡∏£‡∏±‡∏ö`, tags: '‡∏õ‡∏¥‡∏î 5 ‡∏ô‡∏≤‡∏ó‡∏µ' },
            { name: '‚è∞ ‡∏õ‡∏¥‡∏î 10 ‡∏ô‡∏≤‡∏ó‡∏µ', cmd: `/an ‡πÇ‡∏£‡∏á‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏•‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏à‡∏∞‡∏õ‡∏¥‡∏î‡∏ó‡∏≥‡∏Å‡∏≤‡∏£‡πÉ‡∏ô‡∏≠‡∏µ‡∏Å 10 ‡∏ô‡∏≤‡∏ó‡∏µ ‡∏á‡∏î‡∏£‡∏±‡∏ö‡πÄ‡∏Ñ‡∏™‡∏ô‡∏≠‡∏Å‡∏ó‡∏∏‡∏Å‡∏Å‡∏£‡∏ì‡∏µ ‡∏Ç‡∏≠‡πÉ‡∏´‡πâ‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ä‡∏ô‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û‡∏Å‡∏±‡∏ô‡∏î‡πâ‡∏ß‡∏¢‡∏ô‡∏∞‡∏Ñ‡∏∞/‡∏Ñ‡∏£‡∏±‡∏ö`, tags: '‡∏õ‡∏¥‡∏î 10 ‡∏ô‡∏≤‡∏ó‡∏µ' },
            { name: '‚è∞ ‡∏õ‡∏¥‡∏î 15 ‡∏ô‡∏≤‡∏ó‡∏µ', cmd: `/an ‡πÇ‡∏£‡∏á‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏•‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏à‡∏∞‡∏õ‡∏¥‡∏î‡∏ó‡∏≥‡∏Å‡∏≤‡∏£‡πÉ‡∏ô‡∏≠‡∏µ‡∏Å 15 ‡∏ô‡∏≤‡∏ó‡∏µ ‡∏á‡∏î‡∏£‡∏±‡∏ö‡πÄ‡∏Ñ‡∏™‡∏ô‡∏≠‡∏Å‡∏ó‡∏∏‡∏Å‡∏Å‡∏£‡∏ì‡∏µ ‡∏Ç‡∏≠‡πÉ‡∏´‡πâ‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ä‡∏ô‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û‡∏Å‡∏±‡∏ô‡∏î‡πâ‡∏ß‡∏¢‡∏ô‡∏∞‡∏Ñ‡∏∞/‡∏Ñ‡∏£‡∏±‡∏ö`, tags: '‡∏õ‡∏¥‡∏î 15 ‡∏ô‡∏≤‡∏ó‡∏µ' },
            { name: 'üëï Freeday', cmd: `/an ‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á‡∏à‡∏≤‡∏Å‡∏ß‡∏±‡∏ô ‡∏®‡∏∏‡∏Å‡∏£‡πå ‡πÄ‡∏™‡∏≤‡∏£‡πå-‡∏≠‡∏≤‡∏ó‡∏¥‡∏ï‡∏¢‡πå ‡∏´‡∏°‡∏≠‡πÅ‡∏ï‡πà‡∏á‡∏ï‡∏±‡∏ßFree Day ‡πÉ‡∏´‡πâ‡∏™‡∏±‡∏á‡πÄ‡∏Å‡∏ï‡∏∏‡∏ñ‡∏∏‡∏á‡∏°‡∏∑‡∏≠‡∏™‡∏µ‡∏ü‡πâ‡∏≤‡∏ô‡∏∞‡∏Ñ‡∏£‡∏±‡∏ö/‡∏Ñ‡πà‡∏∞`, tags: 'freeday ‡πÅ‡∏ï‡πà‡∏á‡∏Å‡∏≤‡∏¢ ‡∏®‡∏∏‡∏Å‡∏£‡πå ‡πÄ‡∏™‡∏≤‡∏£‡πå ‡∏≠‡∏≤‡∏ó‡∏¥‡∏ï‡∏¢‡πå' },
            { name: 'üö® ‡πÅ‡∏Å‡πä‡∏á‡∏°‡∏µ‡∏™‡∏ï‡∏≠‡∏£‡∏µ‡πà', cmd: `/an ‡∏Ç‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡πà‡∏ß‡∏°‡∏°‡∏∑‡∏≠‡πÅ‡∏Å‡πä‡∏á‡∏ó‡∏µ‡πà‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡∏™‡∏ï‡∏≠‡∏£‡∏µ‡πà‡∏ó‡∏≤‡∏á‡∏Å‡∏≤‡∏£ ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡πÇ‡∏£‡∏á‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏•‡∏†‡∏≤‡∏¢‡πÉ‡∏ô 5 ‡∏ô‡∏≤‡∏ó‡∏µ ‡∏ù‡πà‡∏≤‡∏ù‡∏∑‡∏ô‡∏Ç‡∏≠‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï Blacklist ‡∏Ñ‡∏£‡∏±‡∏ö/‡∏Ñ‡πà‡∏∞`, tags: '‡πÅ‡∏Å‡πä‡∏á ‡∏™‡∏ï‡∏≠‡∏£‡∏µ‡πà safezone ‡∏≠‡∏≠‡∏Å' },
            { name: '‚úÖ ‡πÅ‡∏Å‡πä‡∏á‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÄ‡∏™‡∏£‡πá‡∏à', cmd: `/an ‡∏Ç‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡πà‡∏ß‡∏°‡∏°‡∏∑‡∏≠‡πÅ‡∏Å‡πä‡∏á/‡∏Ñ‡∏£‡∏≠‡∏ö‡∏Ñ‡∏£‡∏±‡∏ß ‡∏´‡∏≤‡∏Å‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏ï‡∏±‡∏ß‡πÄ‡∏™‡∏£‡πá‡∏à‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡∏∞‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏¥‡∏à‡∏ò‡∏∏‡∏£‡∏∞‡∏Å‡∏±‡∏ö‡∏ó‡∏≤‡∏á‡πÇ‡∏£‡∏á‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏• ‡∏£‡∏ö‡∏Å‡∏ß‡∏ô‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡πÇ‡∏£‡∏á‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏•‡∏†‡∏≤‡∏¢‡πÉ‡∏ô 5 ‡∏ô‡∏≤‡∏ó‡∏µ ‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á‡∏à‡∏≤‡∏Å‡πÄ‡∏Ç‡∏ï‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡πÇ‡∏£‡∏á‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏•‡∏°‡∏¥‡πÉ‡∏ä‡πà‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏û‡∏±‡∏Å‡∏û‡∏¥‡∏á ‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì ‡∏Ñ‡∏£‡∏±‡∏ö/‡∏Ñ‡πà‡∏∞`, tags: '‡πÅ‡∏Å‡πä‡∏á ‡πÄ‡∏™‡∏£‡πá‡∏à safezone ‡∏≠‡∏≠‡∏Å ‡∏£‡∏±‡∏Å‡∏©‡∏≤' },
            { name: 'üíÄ ‡πÄ‡∏Ç‡πâ‡∏≤‡πÄ‡∏£‡πÄ‡∏ö‡∏•', cmd: `/an ‡πÅ‡∏û‡∏ó‡∏¢‡πå‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà ‡πÄ‡∏£‡πÄ‡∏ö‡∏• ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ä‡∏ô‡∏´‡πâ‡∏≤‡∏°‡∏ó‡∏≥‡∏£‡πâ‡∏≤‡∏¢‡πÅ‡∏û‡∏ó‡∏¢‡πå‡πÅ‡∏•‡∏∞‡∏Ç‡∏±‡∏î‡∏Ç‡∏ß‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô ‡∏Ñ‡∏£‡∏±‡∏ö/‡∏Ñ‡πà‡∏∞`, tags: '‡πÄ‡∏£‡πÄ‡∏ö‡∏• rebel ‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà ‡πÄ‡∏Ç‡πâ‡∏≤' },
        ];

        function renderRecentCommands() {
            const section = document.getElementById('recent-section');
            const list = document.getElementById('recent-list');

            if (recentCommands.length === 0) {
                section.classList.add('hidden');
                return;
            }

            section.classList.remove('hidden');
            list.innerHTML = recentCommands.map(r => `
                <button onclick="copyCmd(this, '${r.cmd.replace(/'/g, "\\'")}', '${r.name}')"
                    class="no-drag px-2 py-1 bg-indigo-700/50 hover:bg-indigo-600 text-white text-[10px] font-medium rounded transition whitespace-nowrap">
                    ${r.name}
                </button>
            `).join('');
        }

        function addToRecent(name, cmd) {
            // Skip if it's open/close (always visible)
            if (name === 'üü¢ ‡πÄ‡∏õ‡∏¥‡∏î‡∏ó‡∏≥‡∏Å‡∏≤‡∏£' || name === 'üî¥ ‡∏õ‡∏¥‡∏î‡∏ó‡∏≥‡∏Å‡∏≤‡∏£') return;

            // Remove if already exists
            recentCommands = recentCommands.filter(r => r.name !== name);

            // Add to front
            recentCommands.unshift({ name, cmd });

            // Keep only last 3
            recentCommands = recentCommands.slice(0, 3);

            // Save to localStorage
            localStorage.setItem('recentCommands', JSON.stringify(recentCommands));

            renderRecentCommands();
        }

        function renderCommands(list) {
            const container = document.getElementById('commands-list');
            if (list.length === 0) {
                container.innerHTML = '<div class="text-slate-500 text-xs text-center py-3">‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á</div>';
                container.classList.remove('hidden');
                return;
            }

            container.innerHTML = `<div class="flex flex-wrap gap-1.5">
                ${list.map(c => `
                    <button onclick="copyCmd(this, '${c.cmd.replace(/'/g, "\\'")}', '${c.name}')"
                        class="no-drag px-2.5 py-1.5 bg-slate-700 hover:bg-slate-600 text-white text-[10px] font-medium rounded-lg transition whitespace-nowrap">
                        ${c.name}
                    </button>
                `).join('')}
            </div>`;
            container.classList.remove('hidden');
        }

        function filterCommands(query) {
            const container = document.getElementById('commands-list');
            const q = query.toLowerCase().trim();

            if (!q) {
                container.classList.add('hidden');
                return;
            }

            const filtered = commands.filter(c =>
                c.name.toLowerCase().includes(q) ||
                c.cmd.toLowerCase().includes(q) ||
                c.tags.toLowerCase().includes(q)
            );
            renderCommands(filtered);
        }

        function copyCmd(btn, text, name) {
            const finalText = text.replace(/\${serverName}/g, serverName);
            navigator.clipboard.writeText(finalText);

            // Add to recent (if name provided)
            if (name) addToRecent(name, text);

            const orig = btn.textContent;
            btn.textContent = '‚úÖ Copied!';
            btn.classList.remove('bg-emerald-600', 'bg-rose-600', 'bg-slate-700', 'bg-indigo-700/50');
            btn.classList.add('bg-cyan-600');
            setTimeout(() => {
                btn.textContent = orig;
                btn.classList.remove('bg-cyan-600');
                if (orig.includes('‡πÄ‡∏õ‡∏¥‡∏î')) btn.classList.add('bg-emerald-600');
                else if (orig.includes('‡∏õ‡∏¥‡∏î‡∏ó‡∏≥‡∏Å‡∏≤‡∏£')) btn.classList.add('bg-rose-600');
                else btn.classList.add('bg-slate-700');
            }, 800);
        }

        // Lock toggle
        let isLocked = false;
        function toggleLock() {
            isLocked = !isLocked;
            const titleBar = document.getElementById('title-bar');
            const lockBtn = document.getElementById('lock-btn');
            if (isLocked) {
                titleBar.classList.remove('drag-region');
                titleBar.classList.remove('cursor-move');
                lockBtn.textContent = 'üîí';
            } else {
                titleBar.classList.add('drag-region');
                titleBar.classList.add('cursor-move');
                lockBtn.textContent = 'üîì';
            }
        }

        // Initial render
        renderRecentCommands();
    </script>
</body>

</html>