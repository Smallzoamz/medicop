<!DOCTYPE html>
<html lang="th">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blacklist</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    <link
        href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&family=Prompt:wght@300;400;500;600&display=swap"
        rel="stylesheet">
    <style>
        :root {
            --primary-cyan: #22d3ee;
            --primary-purple: #a855f7;
            --danger-rose: #fb7185;
            --success-emerald: #10b981;
            --warning-amber: #f59e0b;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Prompt', sans-serif;
        }

        .font-outfit {
            font-family: 'Outfit', sans-serif;
        }

        body {
            background: transparent;
            -webkit-app-region: no-drag;
            margin: 0;
            overflow: hidden;
            color: #e2e8f0;
        }

        .glass {
            background: rgba(15, 23, 42, 0.95);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(251, 113, 133, 0.2);
            box-shadow:
                0 10px 25px -5px rgba(0, 0, 0, 0.4),
                inset 0 1px 1px rgba(251, 113, 133, 0.05);
        }

        .glass-panel {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            transition: all 0.2s ease;
        }

        .drag-region {
            -webkit-app-region: drag;
        }

        .no-drag {
            -webkit-app-region: no-drag;
        }

        ::-webkit-scrollbar {
            width: 4px;
        }

        ::-webkit-scrollbar-track {
            background: transparent;
        }

        ::-webkit-scrollbar-thumb {
            background: rgba(251, 113, 133, 0.15);
            border-radius: 10px;
        }

        .inp {
            width: 100%;
            padding: 10px 14px;
            font-size: 11px;
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.05);
            background: rgba(255, 255, 255, 0.03);
            color: white;
            transition: all 0.2s;
        }

        .inp:focus {
            outline: none;
            border-color: rgba(251, 113, 133, 0.4);
            background: rgba(255, 255, 255, 0.06);
        }

        .inp option {
            background-color: #1e293b;
            color: white;
        }

        .btn-control {
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 6px;
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            color: #94a3b8;
            background: rgba(255, 255, 255, 0.03);
        }

        .btn-control:hover {
            transform: translateY(-1px);
            background: rgba(255, 255, 255, 0.08);
            color: #fff;
        }

        .btn-primary {
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .btn-primary:active {
            transform: scale(0.98);
        }

        .btn-primary:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .glow-rose {
            text-shadow: 0 0 10px rgba(251, 113, 133, 0.4);
        }

        .glow-emerald {
            text-shadow: 0 0 10px rgba(16, 185, 129, 0.4);
        }
    </style>
</head>

<body>
    <div class="glass rounded-xl shadow-2xl overflow-hidden" style="width: 500px;">
        <!-- Title Bar -->
        <div id="title-bar"
            class="drag-region p-3 border-b border-rose-500/20 flex justify-between items-center cursor-move bg-gradient-to-r from-rose-500/10 to-transparent">
            <div class="flex items-center gap-2">
                <span
                    class="text-rose-400 text-[10px] font-outfit font-black tracking-widest uppercase glow-rose">BLACKLIST
                    SYSTEM</span>
                <div class="w-1 h-3 bg-white/10 rounded-full"></div>
                <span class="text-[9px] text-slate-500 font-medium">‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏® ‡πÅ‡∏•‡∏∞ ‡∏ö‡∏ó‡∏•‡∏á‡πÇ‡∏ó‡∏©</span>
            </div>
            <div class="flex gap-1.5 no-drag">
                <button id="lock-btn" onclick="toggleLock()" class="btn-control" title="‡∏•‡πá‡∏≠‡∏Ñ/‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Ñ‡∏Å‡∏≤‡∏£‡∏•‡∏≤‡∏Å"><span
                        class="text-[10px]">üîì</span></button>
                <button onclick="closePanel()" class="btn-control hover:!bg-rose-500/20 hover:!text-rose-400"
                    title="‡∏õ‡∏¥‡∏î"><span class="text-[10px]">‚úï</span></button>
            </div>
        </div>

        <div class="p-4 space-y-5">
            <!-- Section 1: ‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏® Blacklist -->
            <section>
                <div class="flex items-center justify-between mb-3 px-1">
                    <div class="flex items-center gap-2">
                        <div class="p-1.5 bg-rose-500/20 rounded-lg text-rose-400">
                            <svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5"
                                    d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z">
                                </path>
                            </svg>
                        </div>
                        <span
                            class="text-rose-400 text-[11px] font-bold uppercase tracking-wider glow-rose">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏î‡∏≥</span>
                    </div>
                </div>

                <div class="glass-panel p-4 border border-rose-500/10 space-y-4">
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label
                                class="text-[10px] text-slate-400 font-bold uppercase tracking-tighter mb-1.5 block">‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó</label>
                            <select id="bl-type" class="inp no-drag" onchange="updateTypeLabel()">
                                <option value="patient">üìû ‡∏Ñ‡∏ô‡πÑ‡∏Ç‡πâ‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ</option>
                                <option value="citizen">üë§ ‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ä‡∏ô</option>
                                <option value="gang">üè¥ ‡πÅ‡∏Å‡πä‡∏á</option>
                                <option value="family">üë®‚Äçüë©‚Äçüëß ‡∏Ñ‡∏£‡∏≠‡∏ö‡∏Ñ‡∏£‡∏±‡∏ß</option>
                            </select>
                        </div>
                        <div>
                            <label id="bl-name-label"
                                class="text-[10px] text-slate-400 font-bold uppercase tracking-tighter mb-1.5 block">‡∏ä‡∏∑‡πà‡∏≠
                                / ‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£</label>
                            <input type="text" id="bl-name" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•..." class="inp no-drag font-outfit">
                        </div>
                    </div>

                    <div>
                        <label
                            class="text-[10px] text-slate-400 font-bold uppercase tracking-tighter mb-1.5 block">‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏</label>
                        <select id="bl-reason" class="inp no-drag">
                            <option value="‡∏ó‡∏≥‡∏£‡πâ‡∏≤‡∏¢‡∏£‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏¢‡πÉ‡∏ô‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà Safe Zone">‡∏ó‡∏≥‡∏£‡πâ‡∏≤‡∏¢‡∏£‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏¢‡πÉ‡∏ô‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà Safe Zone</option>
                            <option value="‡∏Ñ‡∏ß‡∏±‡∏Å‡∏≠‡∏≤‡∏ß‡∏∏‡∏ò‡πÉ‡∏ô‡πÄ‡∏Ç‡∏ï‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡πÇ‡∏£‡∏á‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏•">‡∏Ñ‡∏ß‡∏±‡∏Å‡∏≠‡∏≤‡∏ß‡∏∏‡∏ò‡πÉ‡∏ô‡πÄ‡∏Ç‡∏ï‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡πÇ‡∏£‡∏á‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏•</option>
                            <option value="‡∏Ç‡πÇ‡∏°‡∏¢‡∏¢‡∏≤‡∏ô‡∏û‡∏≤‡∏´‡∏ô‡∏∞‡πÉ‡∏ô‡πÄ‡∏Ç‡∏ï‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡πÇ‡∏£‡∏á‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏•">‡∏Ç‡πÇ‡∏°‡∏¢‡∏¢‡∏≤‡∏ô‡∏û‡∏≤‡∏´‡∏ô‡∏∞‡πÉ‡∏ô‡πÄ‡∏Ç‡∏ï‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡πÇ‡∏£‡∏á‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏•</option>
                            <option value="‡∏™‡∏ß‡∏°‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏õ‡∏Å‡∏õ‡∏¥‡∏î‡πÉ‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡πÉ‡∏ô‡πÄ‡∏Ç‡∏ï‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡πÇ‡∏£‡∏á‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏•">
                                ‡∏™‡∏ß‡∏°‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏õ‡∏Å‡∏õ‡∏¥‡∏î‡πÉ‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡πÉ‡∏ô‡πÄ‡∏Ç‡∏ï‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡πÇ‡∏£‡∏á‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏•</option>
                            <option value="‡∏Ç‡∏±‡∏î‡∏Ç‡∏ß‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡πÅ‡∏û‡∏ó‡∏¢‡πå">‡∏Ç‡∏±‡∏î‡∏Ç‡∏ß‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡πÅ‡∏û‡∏ó‡∏¢‡πå</option>
                            <option value="‡∏ó‡∏≥‡∏£‡πâ‡∏≤‡∏¢‡πÅ‡∏û‡∏ó‡∏¢‡πå‡∏Ç‡∏ì‡∏∞‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÅ‡∏ö‡∏ö ‡∏´‡∏£‡∏∑‡∏≠ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà">
                                ‡∏ó‡∏≥‡∏£‡πâ‡∏≤‡∏¢‡πÅ‡∏û‡∏ó‡∏¢‡πå‡∏Ç‡∏ì‡∏∞‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÅ‡∏ö‡∏ö ‡∏´‡∏£‡∏∑‡∏≠ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà</option>
                            <option value="‡∏Ç‡πÇ‡∏°‡∏¢‡∏¢‡∏≤‡∏ô‡∏û‡∏≤‡∏´‡∏ô‡∏∞‡∏Ç‡∏≠‡∏á‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô">‡∏Ç‡πÇ‡∏°‡∏¢‡∏¢‡∏≤‡∏ô‡∏û‡∏≤‡∏´‡∏ô‡∏∞‡∏Ç‡∏≠‡∏á‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô</option>
                            <option value="‡∏ó‡∏≥‡∏Å‡∏≤‡∏£‡πÄ‡∏Ñ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏¢‡πâ‡∏≤‡∏¢‡∏®‡∏û ‡πÑ‡∏õ‡∏à‡∏≤‡∏Å‡∏à‡∏∏‡∏î‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏Å‡∏î‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÄ‡∏Ñ‡∏™">‡∏ó‡∏≥‡∏Å‡∏≤‡∏£‡πÄ‡∏Ñ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏¢‡πâ‡∏≤‡∏¢‡∏®‡∏û
                                ‡πÑ‡∏õ‡∏à‡∏≤‡∏Å‡∏à‡∏∏‡∏î‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏Å‡∏î‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÄ‡∏Ñ‡∏™</option>
                            <option value="‡∏ù‡πà‡∏≤‡∏ù‡∏∑‡∏ô‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡πÄ‡∏ä‡∏¥‡∏ç‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡πÇ‡∏£‡∏á‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏•">
                                ‡∏ù‡πà‡∏≤‡∏ù‡∏∑‡∏ô‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡πÄ‡∏ä‡∏¥‡∏ç‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡πÇ‡∏£‡∏á‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏•</option>
                            <option value="‡∏Å‡∏£‡∏∞‡∏ó‡∏≥‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ú‡∏¥‡∏î‡∏à‡∏£‡∏¥‡∏á‡∏ï‡∏≤‡∏°‡∏´‡∏•‡∏±‡∏Å‡∏ê‡∏≤‡∏ô">‡∏Å‡∏£‡∏∞‡∏ó‡∏≥‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ú‡∏¥‡∏î‡∏à‡∏£‡∏¥‡∏á‡∏ï‡∏≤‡∏°‡∏´‡∏•‡∏±‡∏Å‡∏ê‡∏≤‡∏ô</option>
                            <option value="‡∏ó‡∏≥‡∏£‡πâ‡∏≤‡∏¢‡∏£‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏¢‡πÅ‡∏û‡∏ó‡∏¢‡πå‡πÉ‡∏ô‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏£‡πÄ‡∏ö‡∏•">‡∏ó‡∏≥‡∏£‡πâ‡∏≤‡∏¢‡∏£‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏¢‡πÅ‡∏û‡∏ó‡∏¢‡πå‡πÉ‡∏ô‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏£‡πÄ‡∏ö‡∏•</option>
                        </select>
                    </div>

                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label
                                class="text-[10px] text-slate-400 font-bold uppercase tracking-tighter mb-1.5 block">‡∏Ñ‡πà‡∏≤‡∏õ‡∏£‡∏±‡∏ö
                                ($-One)</label>
                            <input type="number" id="bl-fine" placeholder="‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô..." class="inp no-drag font-outfit"
                                min="0">
                        </div>
                        <div>
                            <label
                                class="text-[10px] text-slate-400 font-bold uppercase tracking-tighter mb-1.5 block">‡∏ö‡∏ó‡∏•‡∏á‡πÇ‡∏ó‡∏©‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°</label>
                            <select id="bl-penalty" class="inp no-drag">
                                <option value="">‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÇ‡∏ó‡∏©‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°</option>
                                <option value="x2">‡πÇ‡∏ó‡∏©‡∏Ñ‡πà‡∏≤‡∏£‡∏±‡∏Å‡∏©‡∏≤ x2</option>
                                <option value="x5">‡πÇ‡∏ó‡∏©‡∏Ñ‡πà‡∏≤‡∏£‡∏±‡∏Å‡∏©‡∏≤ x5</option>
                                <option value="no-treat">‡πÑ‡∏°‡πà‡∏ó‡∏≥‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏Å‡∏©‡∏≤ (No-Treat)</option>
                            </select>
                        </div>
                    </div>

                    <button onclick="copyBlacklist()"
                        class="btn-primary no-drag w-full py-3 bg-rose-600 hover:bg-rose-500 text-white text-[11px] font-bold rounded-xl shadow-lg shadow-rose-900/20 flex items-center justify-center gap-2">
                        <svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5"
                                d="M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4">
                            </path>
                        </svg>
                        ‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏® ‡πÅ‡∏•‡∏∞ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏î‡∏≥
                    </button>
                </div>
            </section>

            <!-- Section 2: ‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡∏õ‡∏•‡∏î Blacklist -->
            <section>
                <div class="flex items-center justify-between mb-3 px-1">
                    <div class="flex items-center gap-2">
                        <div class="p-1.5 bg-emerald-500/20 rounded-lg text-emerald-400">
                            <svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5"
                                    d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                        <span
                            class="text-emerald-400 text-[11px] font-bold uppercase tracking-wider glow-emerald">‡∏õ‡∏•‡∏î‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏î‡∏≥</span>
                    </div>
                </div>

                <div class="glass-panel p-4 border border-emerald-500/10 space-y-4">
                    <div>
                        <label
                            class="text-[10px] text-slate-400 font-bold uppercase tracking-tighter mb-1.5 block">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Ñ</label>
                        <select id="unbl-select" class="inp no-drag font-outfit">
                            <option value="">-- NO SELECTION --</option>
                        </select>
                    </div>
                    <button onclick="copyUnblacklist()"
                        class="btn-primary no-drag w-full py-3 bg-emerald-600 hover:bg-emerald-500 text-white text-[11px] font-bold rounded-xl shadow-lg shadow-emerald-900/20 flex items-center justify-center gap-2">
                        <svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5"
                                d="M9 11l3 3m0 0l3-3m-3 3V8m0 13a9 9 0 110-18 9 9 0 010 18z"></path>
                        </svg>
                        ‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡∏õ‡∏•‡∏î ‡πÅ‡∏•‡∏∞ ‡∏•‡∏ö‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏î‡∏≥
                    </button>
                </div>
            </section>
        </div>
        <div class="h-1 bg-gradient-to-r from-rose-500/40 via-purple-500/40 to-rose-500/40"></div>
    </div>

    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyCPnd6bmpPe0cbWXbNh2LsYaeGcFHZNNsU",
            authDomain: "medic-op.firebaseapp.com",
            projectId: "medic-op",
            storageBucket: "medic-op.firebasestorage.app",
            messagingSenderId: "628357107384",
            appId: "1:628357107384:web:3050de54d5a84d10ae75e2"
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

        let announceCmd = '/an';
        let blacklistData = [];

        // Load server settings for announce command
        db.collection('op_settings').doc('server').get().then(doc => {
            if (doc.exists && doc.data().announceCmd) {
                announceCmd = doc.data().announceCmd;
            }
        });

        loadBlacklistFromFirebase();

        function updateTypeLabel() {
            const type = document.getElementById('bl-type').value;
            const label = document.getElementById('bl-name-label');
            if (type === 'patient') label.textContent = '‡πÄ‡∏ö‡∏≠‡∏£‡πå ‡∏´‡∏£‡∏∑‡∏≠ ‡∏ä‡∏∑‡πà‡∏≠';
            else if (type === 'citizen') label.textContent = '‡∏ä‡∏∑‡πà‡∏≠‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ä‡∏ô';
            else if (type === 'gang') label.textContent = '‡∏ä‡∏∑‡πà‡∏≠‡πÅ‡∏Å‡πä‡∏á';
            else label.textContent = '‡∏ä‡∏∑‡πà‡∏≠‡∏Ñ‡∏£‡∏≠‡∏ö‡∏Ñ‡∏£‡∏±‡∏ß';
        }

        function populateUnblacklistDropdown() {
            const select = document.getElementById('unbl-select');
            select.innerHTML = '<option value="">-- NO SELECTION --</option>';
            blacklistData.forEach((entry, idx) => {
                const name = typeof entry === 'object' ? entry.name : entry;
                const type = typeof entry === 'object' ? entry.type : 'unknown';
                let typeLabel = '';
                if (type === 'patient') typeLabel = 'üìû';
                else if (type === 'citizen') typeLabel = 'üë§';
                else if (type === 'gang') typeLabel = 'üè¥';
                else if (type === 'family') typeLabel = 'üë®‚Äçüë©‚Äçüëß';
                select.innerHTML += `<option value="${idx}">${typeLabel} ${name}</option>`;
            });
        }

        function getTypeLabel(type) {
            if (type === 'patient') return '‡∏Ñ‡∏ô‡πÑ‡∏Ç‡πâ‡πÄ‡∏ö‡∏≠‡∏£‡πå';
            if (type === 'citizen') return '‡∏Ñ‡∏∏‡∏ì';
            if (type === 'gang') return '‡πÅ‡∏Å‡πä‡∏á';
            if (type === 'family') return '‡∏Ñ‡∏£‡∏≠‡∏ö‡∏Ñ‡∏£‡∏±‡∏ß';
            return '';
        }

        async function loadBlacklistFromFirebase() {
            try {
                const doc = await db.collection('op_settings').doc('blacklist').get();
                if (doc.exists) {
                    blacklistData = doc.data().list || [];
                } else {
                    blacklistData = [];
                }
                populateUnblacklistDropdown();
                if (typeof autoResize === 'function') autoResize();
            } catch (e) {
                console.error('Failed to load blacklist:', e);
            }
        }

        async function saveBlacklistToFirebase() {
            try {
                await db.collection('op_settings').doc('blacklist').set({ list: blacklistData });
                console.log('‚úÖ Blacklist synced to Firebase');
            } catch (e) {
                console.error('Failed to sync blacklist:', e);
            }
        }


        async function copyBlacklist() {
            const type = document.getElementById('bl-type').value;
            const name = document.getElementById('bl-name').value.trim();
            const reason = document.getElementById('bl-reason').value;
            const fine = document.getElementById('bl-fine').value.trim();
            const penalty = document.getElementById('bl-penalty').value;

            if (!name || !fine) return;

            const typeLabel = getTypeLabel(type);
            const msg = `${announceCmd} ‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏® Blacklist ${typeLabel} ${name} ‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á‡∏à‡∏≤‡∏Å ${reason} ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡πÅ‡∏û‡∏ó‡∏¢‡πå‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏à‡πà‡∏≤‡∏¢‡∏Ñ‡πà‡∏≤‡∏õ‡∏£‡∏±‡∏ö‡∏à‡∏≥‡∏ô‡∏ß‡∏ô ${fine} One-Dollars ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏°‡∏≤‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ä‡∏≥‡∏£‡∏∞‡∏Ñ‡πà‡∏≤‡∏õ‡∏£‡∏±‡∏ö‡∏î‡πâ‡∏ß‡∏¢ ‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡∏£‡∏±‡∏ö/‡∏Ñ‡πà‡∏∞`;

            await navigator.clipboard.writeText(msg);

            const btn = document.querySelector('button[onclick="copyBlacklist()"]');
            const originalHTML = btn.innerHTML;
            btn.innerHTML = '‚úÖ COPIED & SAVED!';
            btn.classList.replace('bg-rose-600', 'bg-emerald-600');
            btn.classList.replace('hover:bg-rose-500', 'hover:bg-emerald-500');
            btn.disabled = true;

            const entry = { name, type, reason, fine, penaltyTag: penalty, createdAt: Date.now(), createdBy: 'Overlay' };

            // Check if already exists
            const exists = blacklistData.some(b => (typeof b === 'object' ? b.name : b) === name);
            if (!exists) {
                blacklistData.push(entry);
                await saveBlacklistToFirebase();
                populateUnblacklistDropdown();
            }

            document.getElementById('bl-name').value = '';
            document.getElementById('bl-fine').value = '';

            setTimeout(() => {
                closePanel();
                btn.innerHTML = originalHTML;
                btn.classList.replace('bg-emerald-600', 'bg-rose-600');
                btn.classList.replace('hover:bg-emerald-500', 'hover:bg-rose-500');
                btn.disabled = false;
            }, 500);
        }

        async function copyUnblacklist() {
            const select = document.getElementById('unbl-select');
            const idx = select.value;
            if (idx === '') return;

            const entry = blacklistData[parseInt(idx)];
            const name = typeof entry === 'object' ? entry.name : entry;
            const type = typeof entry === 'object' ? entry.type : 'unknown';
            const typeLabel = getTypeLabel(type);

            const msg = `${announceCmd} ‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡∏õ‡∏•‡∏î Blacklist ${typeLabel} ${name} ‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á‡∏à‡∏≤‡∏Å‡πÑ‡∏î‡πâ‡∏à‡πà‡∏≤‡∏¢‡∏Ñ‡πà‡∏≤‡∏õ‡∏£‡∏±‡∏ö‡∏Ñ‡∏£‡∏ö‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢ ‡πÅ‡∏•‡∏∞‡∏à‡∏∞‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏à‡∏≤‡∏Å‡πÅ‡∏û‡∏ó‡∏¢‡πå‡∏ï‡∏≤‡∏°‡∏õ‡∏Å‡∏ï‡∏¥‡∏Ñ‡∏£‡∏±‡∏ö/‡∏Ñ‡πà‡∏∞`;

            await navigator.clipboard.writeText(msg);

            const btn = document.querySelector('button[onclick="copyUnblacklist()"]');
            const originalHTML = btn.innerHTML;
            btn.innerHTML = '‚úÖ COPIED & REMOVED!';
            btn.classList.replace('bg-emerald-600', 'bg-cyan-600');
            btn.disabled = true;

            // Remove from array
            blacklistData.splice(parseInt(idx), 1);
            await saveBlacklistToFirebase();
            populateUnblacklistDropdown();

            select.value = '';

            setTimeout(() => {
                closePanel();
                btn.innerHTML = originalHTML;
                btn.classList.replace('bg-cyan-600', 'bg-emerald-600');
                btn.disabled = false;
            }, 500);
        }

        function closePanel() {
            if (window.panelAPI && window.panelAPI.closeBlacklistPanel) {
                window.panelAPI.closeBlacklistPanel();
            }
        }

        // Lock toggle
        let isLocked = false;
        function toggleLock() {
            isLocked = !isLocked;
            const titleBar = document.getElementById('title-bar');
            const lockBtn = document.getElementById('lock-btn');
            if (isLocked) {
                titleBar.classList.remove('drag-region', 'cursor-move');
                lockBtn.innerHTML = '<span class="text-[10px]">üîí</span>';
                lockBtn.classList.add('text-amber-400');
            } else {
                titleBar.classList.add('drag-region');
                titleBar.classList.add('cursor-move');
                lockBtn.innerHTML = '<span class="text-[10px]">üîì</span>';
                lockBtn.classList.remove('text-amber-400');
            }
        }

        // Auto resize function
        function autoResize() {
            setTimeout(() => {
                if (window.panelAPI && window.panelAPI.resizeToFit) {
                    window.panelAPI.resizeToFit('blacklist', document.body.offsetHeight + 10);
                }
            }, 100);
        }

        // Resize on load and after Firebase data is loaded
        window.addEventListener('load', autoResize);

        // Call autoResize after list updates
        const originalPopulate = populateUnblacklistDropdown;
        populateUnblacklistDropdown = function () {
            originalPopulate();
            autoResize();
        };
    </script>
</body>

</html>